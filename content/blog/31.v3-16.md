---
title: Nuxt 3.16
description: Nuxt 3.16 å‘å¸ƒäº† - å……æ»¡äº†ç‰¹æ€§å’Œæ€§èƒ½æ”¹è¿›ï¼
navigation: false
image: /assets/blog/v3.16.png
authors:
  - name: Daniel Roe
    avatar:
      src: https://github.com/danielroe.png
    to: https://bsky.app/profile/danielroe.dev
date: 2025-03-07T10:00:00.000Z
category: Release
---

è¿™æ¬¡æ›´æ–°å†…å®¹éå¸¸ä¸°å¯Œï¼

## âš¡ï¸ å…¨æ–°çš„ Nuxt

éš†é‡æ¨å‡º `create-nuxt`ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯åŠ¨ Nuxt é¡¹ç›®çš„æ–°å·¥å…·ï¼ˆéå¸¸æ„Ÿè°¢ [@devgar](https://github.com/devgar) æèµ äº†åŒ…åï¼‰ï¼

å®ƒæ˜¯ `nuxi init` çš„ç²¾ç®€ç‰ˆæœ¬ - åªæœ‰å…¶å…­åˆ†ä¹‹ä¸€çš„å¤§å°ï¼Œå¹¶ä¸”æ†ç»‘ä¸ºåŒ…å«æ‰€æœ‰å†…è”ä¾èµ–é¡¹çš„å•ä¸ªæ–‡ä»¶ï¼Œä»¥å°½å¯èƒ½å¿«åœ°å¯åŠ¨æ‚¨çš„é¡¹ç›®ã€‚

å¯åŠ¨ä¸€ä¸ªæ–°é¡¹ç›®éå¸¸ç®€å•ï¼š

```bash
npm create nuxt
```

ç‰¹åˆ«æ„Ÿè°¢ [@cmang](https://github.com/cmang) æä¾›çš„[ç²¾ç¾çš„ ASCII è‰ºæœ¯](https://bsky.app/profile/durdraw.org/post/3liadod3gv22a)ã€‚â¤ï¸

æƒ³äº†è§£æ›´å¤šå…³äº Nuxt CLI çš„æœªæ¥å‘å±•æ–¹å‘å—ï¼Ÿè¯·æŸ¥çœ‹æˆ‘ä»¬çš„[è·¯çº¿å›¾](https://github.com/nuxt/cli/issues/648)ï¼ŒåŒ…æ‹¬æˆ‘ä»¬å…³äº[äº¤äº’å¼æ¨¡å—é€‰æ‹©å™¨](https://github.com/nuxt/cli/issues/754)çš„è®¡åˆ’ã€‚

## ğŸš€ Unhead v2

æˆ‘ä»¬å·²å‡çº§åˆ° `unhead` v2ï¼Œå®ƒæ˜¯ Nuxt `<head>` ç®¡ç†èƒŒåçš„å¼•æ“ã€‚æ­¤ä¸»è¦ç‰ˆæœ¬ç§»é™¤äº†å·²å¼ƒç”¨çš„åŠŸèƒ½å¹¶æ”¹è¿›äº†ä¸Šä¸‹æ–‡çš„å·¥ä½œæ–¹å¼ï¼š

- å¯¹äº Nuxt 3 ç”¨æˆ·ï¼Œæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæ—§ç‰ˆå…¼å®¹æ€§æ„å»ºï¼Œå› æ­¤ä¸ä¼šå‡ºç°ä»»ä½•ç ´åæ€§æ›´æ”¹
- ä¸Šä¸‹æ–‡çš„å®ç°ç°åœ¨é€šè¿‡ Nuxt æœ¬èº«æ›´åŠ ç›´æ¥

<!-- end list -->

```ts
// Nuxt ç°åœ¨é‡æ–°å¯¼å‡º composablesï¼ŒåŒæ—¶æ­£ç¡®è§£æä¸Šä¸‹æ–‡
export function useHead(input, options = {}) {
  const unhead = injectHead(options.nuxt)
  return head(input, { head: unhead, ...options })
}
```

å¦‚æœæ‚¨åœ¨åº”ç”¨ç¨‹åºä¸­ç›´æ¥ä½¿ç”¨ Unheadï¼Œè¯·æ³¨æ„ï¼š

1.  ä» Nuxt çš„è‡ªåŠ¨å¯¼å…¥æˆ– `#app/composables/head` å¯¼å…¥ï¼Œè€Œä¸æ˜¯ `@unhead/vue`
2.  ç›´æ¥ä» `@unhead/vue` å¯¼å…¥å¯èƒ½ä¼šä¸¢å¤±å¼‚æ­¥ä¸Šä¸‹æ–‡

ä¸è¿‡åˆ«æ‹…å¿ƒ - æˆ‘ä»¬åœ¨ Nuxt 3 ä¸­ä¿æŒäº†å‘åå…¼å®¹æ€§ï¼Œå› æ­¤å¤§å¤šæ•°ç”¨æˆ·æ— éœ€è¿›è¡Œä»»ä½•æ›´æ”¹ï¼

å¦‚æœæ‚¨å·²é€‰æ‹©å¯ç”¨ `compatibilityVersion: 4`ï¼Œè¯·æŸ¥çœ‹æˆ‘ä»¬çš„[å‡çº§æŒ‡å—](https://www.google.com/search?q=/docs/getting-started/upgrade%23unhead-v2)ä»¥äº†è§£å…¶ä»–æ›´æ”¹ã€‚

## ğŸ”§ Devtools v2 å‡çº§

Nuxt Devtools å·²å‡çº§åˆ° v2 ([\#30889](https://github.com/nuxt/nuxt/pull/30889))ï¼

æ‚¨ä¸€å®šä¼šå–œæ¬¢æ–°åŠŸèƒ½ï¼Œä¾‹å¦‚è‡ªå®šä¹‰ç¼–è¾‘å™¨é€‰æ‹©ã€ç”¨äºæ£€æŸ¥å·²è§£æé…ç½®çš„ Discovery.jsï¼ˆéå¸¸é€‚åˆè°ƒè¯•ï¼‰ã€æ¨¡å¼ç”Ÿæˆå™¨çš„å›å½’ä»¥åŠæ›´å°çš„ä¾èµ–é¡¹ã€‚

æˆ‘ä»¬æœ€å–œæ¬¢çš„ä¸€ä¸ªæ”¹è¿›æ˜¯èƒ½å¤Ÿè·Ÿè¸ªæ¨¡å—å¦‚ä½•ä¿®æ”¹æ‚¨çš„ Nuxt é…ç½® - è®©æ‚¨å¯ä»¥é€è§†åº•å±‚å‘ç”Ÿçš„ä¸€åˆ‡ã€‚

ğŸ‘‰ åœ¨ [Nuxt DevTools å‘å¸ƒè¯´æ˜](https://github.com/nuxt/devtools/releases) ä¸­äº†è§£æ‰€æœ‰è¯¦ç»†ä¿¡æ¯ã€‚

## âš¡ï¸ æ€§èƒ½æ”¹è¿›

æˆ‘ä»¬æ­£åœ¨ä¸æ–­æé«˜ Nuxt çš„é€Ÿåº¦ï¼Œv3.16 ä¸­åŒ…å«è®¸å¤šæ”¹è¿›ï¼š

1.  ä½¿ç”¨ [`exsolve`](https://www.google.com/search?q=%5Bhttps://github.com/unjs/exsolve%5D\(https://github.com/unjs/exsolve\)) è¿›è¡Œæ¨¡å—è§£æ ([\#31124](https://github.com/nuxt/nuxt/pull/31124))ï¼Œä»¥åŠ unjs ç”Ÿæ€ç³»ç»Ÿçš„å…¶ä½™éƒ¨åˆ†ï¼ˆnitroã€c12ã€pkg-types ç­‰ï¼‰ - è¿™æå¤§åœ°åŠ å¿«äº†æ¨¡å—è§£æé€Ÿåº¦
2.  æ›´æ™ºèƒ½çš„æ¨¡å—è§£æè·¯å¾„ ([\#31037](https://github.com/nuxt/nuxt/pull/31037)) - ä¼˜å…ˆè€ƒè™‘ç›´æ¥å¯¼å…¥ä»¥æé«˜æ•ˆç‡
3.  æ¶ˆé™¤é‡å¤çš„ Nitro åˆ«åè§£æ ([\#31088](https://github.com/nuxt/nuxt/pull/31088)) - æ›´ç²¾ç®€çš„æ–‡ä»¶å¤„ç†
4.  é€šè¿‡è·³è¿‡ä¸å¿…è¦çš„è§£ææ­¥éª¤æ¥ç®€åŒ– `loadNuxt` ([\#31176](https://github.com/nuxt/nuxt/pull/31176)) - æ›´å¿«çš„å¯åŠ¨é€Ÿåº¦
5.  åœ¨ Nuxt æ’ä»¶ä¸­é‡‡ç”¨ `oxc-parser` è¿›è¡Œè§£æ ([\#30066](https://github.com/nuxt/nuxt/pull/30066))

æ‰€æœ‰è¿™äº›é€Ÿåº¦æå‡éƒ½æ˜¯è‡ªåŠ¨å‘ç”Ÿçš„ - æ— éœ€ä»»ä½•é…ç½®ï¼

ç‰¹åˆ«æ„Ÿè°¢ [CodSpeed](https://codspeed.io/) åŠå…¶ [Vitest åŸºå‡†æµ‹è¯•](https://vitest.dev/guide/features.html#benchmarking) åœ¨ CI ä¸­è¡¡é‡è¿™äº›æ”¹è¿› - è¿™éå¸¸æœ‰å¸®åŠ©ã€‚

æä¾›ä¸€äº›è½¶äº‹è¯æ®ï¼Œæˆ‘çš„ä¸ªäººç½‘ç«™ [roe.dev](https://github.com/danielroe/roe.dev) åœ¨ v3.16 ä¸‹åŠ è½½é€Ÿåº¦æé«˜äº† 32%ï¼Œè€Œ [nuxt.com](https://github.com/nuxt/nuxt.com) åˆ™æé«˜äº† 28%ã€‚æˆ‘å¸Œæœ›æ‚¨ä¹Ÿèƒ½çœ‹åˆ°ç±»ä¼¼çš„ç»“æœï¼âš¡ï¸

## ğŸ•°ï¸ å»¶è¿Ÿæ°´åˆæ”¯æŒ

æˆ‘ä»¬éå¸¸é«˜å…´ä¸ºæ‚¨å¸¦æ¥åŸç”Ÿçš„å»¶è¿Ÿ/æ‡’åŠ è½½æ°´åˆæ”¯æŒ ([\#26468](https://github.com/nuxt/nuxt/pull/26468))ï¼è¿™ä½¿æ‚¨å¯ä»¥ç²¾ç¡®æ§åˆ¶ç»„ä»¶ä½•æ—¶æ°´åˆï¼Œä»è€Œæé«˜åˆå§‹åŠ è½½æ€§èƒ½å’Œäº¤äº’æ—¶é—´ã€‚æˆ‘ä»¬æ­£åœ¨åˆ©ç”¨ Vue çš„å†…ç½®æ°´åˆç­–ç•¥ - [è¯·åœ¨ Vue æ–‡æ¡£ä¸­æŸ¥çœ‹](https://vuejs.org/guide/components/async.html#lazy-hydration)ã€‚

```vue
<template>
  <LazyExpensiveComponent hydrate-on-visible />

  <LazyHeavyComponent hydrate-on-idle />

  <LazyDropdown hydrate-on-interaction="mouseover" />

  <LazyMobileMenu hydrate-on-media-query="(max-width: 768px)" />

  <LazyFooter :hydrate-after="2000" />
</template>
```

æ‚¨è¿˜å¯ä»¥ä½¿ç”¨ `@hydrated` äº‹ä»¶ç›‘å¬æ°´åˆä½•æ—¶å‘ç”Ÿï¼š

```vue
<LazyComponent hydrate-on-visible @hydrated="onComponentHydrated" />
```

åœ¨æˆ‘ä»¬çš„[ç»„ä»¶æ–‡æ¡£](https://www.google.com/search?q=/docs/guide/directory-structure/components%23delayed-or-lazy-hydration)ä¸­äº†è§£æ›´å¤šå…³äºæ‡’åŠ è½½æ°´åˆçš„ä¿¡æ¯ã€‚

## ğŸ§© é«˜çº§é¡µé¢é…ç½®

æ‚¨ç°åœ¨å¯ä»¥å¾®è°ƒ Nuxt æ‰«æé¡µé¢çš„æ–‡ä»¶ ([\#31090](https://github.com/nuxt/nuxt/pull/31090))ï¼Œä»è€Œæ›´å¥½åœ°æ§åˆ¶æ‚¨çš„é¡¹ç›®ç»“æ„ï¼š

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  pages: {
    // ç­›é€‰ç‰¹å®šæ–‡ä»¶æˆ–ç›®å½•
    pattern: ['**/*.vue'],
  }
})
```

## ğŸ” å¢å¼ºçš„è°ƒè¯•

æˆ‘ä»¬ä½¿ä½¿ç”¨ `debug` é€‰é¡¹è¿›è¡Œè°ƒè¯•æ›´åŠ çµæ´»ï¼ç°åœ¨æ‚¨å¯ä»¥ä»…å¯ç”¨æ‰€éœ€çš„è°ƒè¯•æ—¥å¿— ([\#30578](https://github.com/nuxt/nuxt/pull/30578))ï¼š

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  debug: {
    // å¯ç”¨ç‰¹å®šçš„è°ƒè¯•åŠŸèƒ½
    templates: true,
    modules: true,
    watchers: true,
    hooks: {
      client: true,
      server: true,
    },
    nitro: true,
    router: true,
    hydration: true,
  }
})
```

æˆ–è€…ä½¿ç”¨ç®€å•çš„ `debug: true` æ¥å¯ç”¨æ‰€æœ‰è¿™äº›è°ƒè¯•åŠŸèƒ½ã€‚

## ğŸ¨ è£…é¥°å™¨æ”¯æŒ

å¯¹äºè£…é¥°å™¨çš„ç²‰ä¸ä»¬ï¼ˆæ— è®ºä½ ä»¬æ˜¯è°ï¼ï¼‰ï¼Œæˆ‘ä»¬æ·»åŠ äº†å®éªŒæ€§æ”¯æŒ ([\#27672](https://github.com/nuxt/nuxt/pull/27672))ã€‚ä¸æ‰€æœ‰å®éªŒæ€§åŠŸèƒ½ä¸€æ ·ï¼Œéå¸¸æ„Ÿè°¢æ‚¨çš„åé¦ˆã€‚

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  experimental: {
    decorators: true
  }
})
```

```ts
function something (_method: () => unknown) {
  return () => 'decorated'
}

class SomeClass {
  @something
  public someMethod () {
    return 'initial'
  }
}

const value = new SomeClass().someMethod()
// è¿”å› 'decorated'
```

## ğŸ“› å‘½å Layer åˆ«å

è¿™æ˜¯å¤§å®¶æœŸå¾…å·²ä¹…çš„åŠŸèƒ½ï¼è‡ªåŠ¨æ‰«æçš„æœ¬åœ° layersï¼ˆæ¥è‡ªæ‚¨çš„ `~~/layers` ç›®å½•ï¼‰ç°åœ¨ä¼šè‡ªåŠ¨åˆ›å»ºåˆ«åã€‚æ‚¨å¯ä»¥é€šè¿‡ `#layers/test` è®¿é—®æ‚¨çš„ `~~/layers/test` layer ([\#30948](https://github.com/nuxt/nuxt/pull/30948)) - æ— éœ€ä»»ä½•é…ç½®ã€‚

å¦‚æœæ‚¨æƒ³ä¸ºå…¶ä»– layers ä½¿ç”¨å‘½ååˆ«åï¼Œå¯ä»¥åœ¨æ‚¨çš„ layer é…ç½®ä¸­æ·»åŠ ä¸€ä¸ªåç§°ï¼š

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  $meta: {
    name: 'example-layer',
  },
})
```

è¿™å°†åˆ›å»ºæŒ‡å‘æ‚¨çš„ layer çš„åˆ«å `#layers/example-layer` - ä½¿å¯¼å…¥æ›´ç®€æ´ç›´è§‚ã€‚

## ğŸ§ª é”™è¯¯å¤„ç†æ”¹è¿›

æˆ‘ä»¬æå¤§åœ°æ”¹è¿›äº†é”™è¯¯æ¶ˆæ¯å’Œæºè·Ÿè¸ª ([\#31144](https://github.com/nuxt/nuxt/pull/31144))ï¼š

1.  é’ˆå¯¹æœªå®šä¹‰çš„ `useAsyncData` è°ƒç”¨æä¾›æ›´æ¸…æ™°çš„è­¦å‘Šï¼Œå¹¶åŒ…å«ç²¾ç¡®çš„æ–‡ä»¶ä½ç½®ä¿¡æ¯
2.  é”™è¯¯é¡µé¢ç°åœ¨åœ¨ island é¡µé¢é”™è¯¯ä¸Šæ­£ç¡®æ˜¾ç¤º ([\#31081](https://github.com/nuxt/nuxt/pull/31081))

æ­¤å¤–ï¼Œæˆ‘ä»¬ç°åœ¨ä½¿ç”¨ Nitro æ¼‚äº®çš„é”™è¯¯å¤„ç†ï¼ˆç”± [youch](https://github.com/poppinss/youch) æä¾›æ”¯æŒï¼‰åœ¨ç»ˆç«¯ä¸­æä¾›æ›´æœ‰ç”¨çš„é”™è¯¯æ¶ˆæ¯ï¼Œå¹¶å®Œæ•´æ”¯æŒå †æ ˆè·Ÿè¸ªã€‚

Nitro ç°åœ¨è¿˜ä¼šè‡ªåŠ¨åº”ç”¨ source mapsï¼Œè€Œæ— éœ€é¢å¤–çš„ Node é€‰é¡¹ï¼Œå¹¶ä¸”æˆ‘ä»¬åœ¨æ¸²æŸ“é”™è¯¯é¡µé¢æ—¶è®¾ç½®äº†é€‚å½“çš„å®‰å…¨æ ‡å¤´ã€‚

## ğŸ“¦ æ¨¡å—å¼€å‘æ”¹è¿›

å¯¹äºæ¨¡å—ä½œè€…ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä½¿ç”¨ `addTypeTemplate` å¢å¼º Nitro ç±»å‹çš„èƒ½åŠ› ([\#31079](https://github.com/nuxt/nuxt/pull/31079))ï¼š

```ts
// åœ¨æ‚¨çš„ Nuxt æ¨¡å—ä¸­
export default defineNuxtModule({
  setup(options, nuxt) {
    addTypeTemplate({
      filename: 'types/my-module.d.ts',
      getContents: () => `
        declare module 'nitropack' {
          interface NitroRouteConfig {
            myCustomOption?: boolean
          }
        }
      `
    }, { nitro: true })
  }
})
```

## âš™ï¸ Nitro v2.11 å‡çº§

æˆ‘ä»¬å·²å‡çº§åˆ° Nitro v2.11ã€‚å…¶ä¸­åŒ…å«éå¸¸å¤šçš„æ”¹è¿› - è¿œè¶…æˆ‘åœ¨è¿™ç¯‡ç®€çŸ­çš„å‘å¸ƒè¯´æ˜ä¸­å¯ä»¥æ¶µç›–çš„èŒƒå›´ã€‚

ğŸ‘‰ è¯·æŸ¥çœ‹ [Nitro v2.11.0 å‘å¸ƒè¯´æ˜](https://github.com/nitrojs/nitro/releases/tag/v2.11.0) äº†è§£æ‰€æœ‰è¯¦ç»†ä¿¡æ¯ã€‚

## ğŸ“¦ æ–°çš„ `unjs` ä¸»è¦ç‰ˆæœ¬

æ­¤ç‰ˆæœ¬åŒ…å«æ¥è‡ª unjs ç”Ÿæ€ç³»ç»Ÿçš„å¤šä¸ªä¸»è¦ç‰ˆæœ¬å‡çº§ï¼Œé‡ç‚¹åœ¨äºé€šè¿‡ä»… ESM çš„åˆ†å‘æé«˜æ€§èƒ½å¹¶å‡å° bundle å¤§å°ï¼š

- unenv å‡çº§åˆ° v2ï¼ˆå®Œå…¨é‡å†™ï¼‰
- db0 å‡çº§åˆ° v0.3ï¼ˆä»… ESMï¼ŒåŸç”Ÿ node:sqlï¼Œæ”¹è¿›ï¼‰
- ohash å‡çº§åˆ° v2ï¼ˆä»… ESMï¼ŒåŸç”Ÿ node:crypto æ”¯æŒï¼Œé€Ÿåº¦æ›´å¿«ï¼‰
- untyped å‡çº§åˆ° v2ï¼ˆä»… ESMï¼Œæ›´å°çš„å®‰è£…å¤§å°ï¼‰
- unimport å‡çº§åˆ° v4ï¼ˆæ”¹è¿›ï¼‰
- c12 å‡çº§åˆ° v3ï¼ˆä»… ESMï¼‰
- pathe å‡çº§åˆ° v2ï¼ˆä»… ESMï¼‰
- cookie-es å‡çº§åˆ° v2ï¼ˆä»… ESMï¼‰
- esbuild å‡çº§åˆ° v0.25
- chokidar å‡çº§åˆ° v4

## âœ… å‡çº§

ä¸å¾€å¸¸ä¸€æ ·ï¼Œæˆ‘ä»¬å»ºè®®çš„å‡çº§æ–¹æ³•æ˜¯è¿è¡Œï¼š

```sh
npx nuxi@latest upgrade --dedupe
```

è¿™ä¼šåˆ·æ–°æ‚¨çš„ lockfile å¹¶å¼•å…¥ Nuxt ä¾èµ–çš„æ‰€æœ‰æœ€æ–°ä¾èµ–é¡¹ï¼Œç‰¹åˆ«æ˜¯æ¥è‡ª unjs ç”Ÿæ€ç³»ç»Ÿçš„ä¾èµ–é¡¹ã€‚

## å®Œæ•´å‘å¸ƒè¯´æ˜

::read-more
---
icon: i-simple-icons-github 
target: \_blank 
to: https://github.com/nuxt/nuxt/releases/tag/v3.16.0
---
é˜…è¯» Nuxt `v3.16.0` çš„å®Œæ•´å‘å¸ƒè¯´æ˜ã€‚
::

è¡·å¿ƒæ„Ÿè°¢å‚ä¸æ­¤ç‰ˆæœ¬çš„æ¯ä¸€ä½ã€‚â¤ï¸

æˆ‘çŸ¥é“æ­¤ç‰ˆæœ¬åŒ…å«è®¸å¤šéå¸¸é‡è¦çš„æ›´æ”¹ - å¦‚æœæ‚¨æœ‰ä»»ä½•åé¦ˆæˆ–é—®é¢˜ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ä»¬ï¼ğŸ™
