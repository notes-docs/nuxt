---
title: 'Introducing Nuxt Scripts'
description: 'Nuxt Scripts ä¸ºç¬¬ä¸‰æ–¹è„šæœ¬æä¾›äº†æ›´å¥½çš„æ€§èƒ½ã€éšç§ã€å®‰å…¨æ€§ä»¥åŠå¼€å‘è€…ä½“éªŒã€‚'
image: /assets/blog/nuxt-scripts/banner.png
authors:
  - name: Harlan Wilton
    avatar: 
      src: https://github.com/harlan-zw.png
    to: https://github.com/harlan-zw
    twitter: harlan_zw
date: 2024-08-20
category: Release
---

Nuxt å›¢é˜Ÿä¸ Google çš„ [Chrome Aurora](https://developer.chrome.com/aurora) å›¢é˜Ÿåˆä½œï¼Œæ¿€åŠ¨åœ°å®£å¸ƒ [Nuxt Scripts](https://scripts.nuxt.com) çš„å…¬å¼€ Beta ç‰ˆå‘å¸ƒã€‚

Nuxt Scripts æ˜¯ä¸€ç§å¤„ç†ç¬¬ä¸‰æ–¹è„šæœ¬çš„æ›´å¥½æ–¹å¼ï¼Œå¯æä¾›æ›´é«˜çš„æ€§èƒ½ã€éšç§ã€å®‰å…¨æ€§ä»¥åŠå¼€å‘è€…ä½“éªŒã€‚

## èµ°è¿‘ Nuxt Scripts

ä¸€å¹´å¤šä»¥å‰ï¼ŒDaniel å‘å¸ƒäº†æœ€åˆçš„ [Nuxt Scripts RFC](https://github.com/nuxt/nuxt/discussions/22016)ã€‚è¯¥ RFC æè®®åˆ›å»ºä¸€ä¸ªæ¨¡å—ï¼Œè¯¥æ¨¡å—å°†â€œå…è®¸ç®¡ç†å’Œä¼˜åŒ–ç¬¬ä¸‰æ–¹è„šæœ¬ï¼Œéµå¾ªé«˜æ€§èƒ½å’Œåˆè§„ç½‘ç«™çš„æœ€ä½³å®è·µâ€ã€‚

ç”±äºæˆ‘ä¸ªäººåœ¨è§£å†³ä¸ç¬¬ä¸‰æ–¹è„šæœ¬ç›¸å…³çš„æ€§èƒ½é—®é¢˜æ–¹é¢[æœ‰è¿‡ç»éªŒ](https://github.com/harlan-zw/nuxt-delay-hydration)ï¼Œæˆ‘çŸ¥é“è¿™äº›æ€§èƒ½ä¼˜åŒ–æœ‰å¤šä¹ˆå›°éš¾ã€‚å°½ç®¡å¦‚æ­¤ï¼Œæˆ‘è¿˜æ˜¯æ¸´æœ›è§£å†³è¿™ä¸ªé—®é¢˜å¹¶æ¥æ‰‹äº†è¿™ä¸ªé¡¹ç›®ã€‚

ä»¥ RFC ä½œä¸ºæƒ³æ³•çš„èŒèŠ½ï¼Œæˆ‘å¼€å§‹ä½¿ç”¨ [Unhead](https://unhead.unjs.io/) åŸå‹åŒ–å®ƒå¯èƒ½[çœ‹èµ·æ¥çš„æ ·å­](https://github.com/nuxt/nuxt/discussions/22016#discussioncomment-6527001)ã€‚

åœ¨æ€è€ƒæˆ‘åˆ°åº•æƒ³æ„å»ºä»€ä¹ˆæ—¶ï¼Œæˆ‘å‘ç°çœŸæ­£çš„é—®é¢˜ä¸ä»…ä»…æ˜¯å¦‚ä½•åŠ è½½â€œä¼˜åŒ–â€çš„ç¬¬ä¸‰æ–¹è„šæœ¬ï¼Œè€Œæ˜¯å¦‚ä½•ä½¿å¤„ç†ç¬¬ä¸‰æ–¹è„šæœ¬çš„æ•´ä½“ä½“éªŒæ›´å¥½ã€‚

## ä¸ºä»€ä¹ˆæ„å»ºç¬¬ä¸‰æ–¹è„šæœ¬æ¨¡å—ï¼Ÿ

[94% çš„ç½‘ç«™è‡³å°‘ä½¿ç”¨ä¸€ä¸ªç¬¬ä¸‰æ–¹æä¾›å•†](https://almanac.httparchive.org/en/2022/third-parties#prevalence)ï¼Œå¹³å‡æ¯ä¸ªç½‘ç«™æœ‰ [äº”ä¸ªç¬¬ä¸‰æ–¹æä¾›å•†](https://docs.google.com/spreadsheets/d/1YqoRRsyiNsrEabVLu2nRU98JIG_0zLLuoQhC2nX8xbM/edit?gid=1428106498#gid=1428106498)ã€‚

æˆ‘ä»¬çŸ¥é“ç¬¬ä¸‰æ–¹è„šæœ¬å¹¶ä¸å®Œç¾ï¼›å®ƒä»¬[å‡æ…¢äº† Web çš„é€Ÿåº¦](https://web.dev/articles/optimizing-content-efficiency-loading-third-party-javascript#)ï¼Œå¯¼è‡´éšç§å’Œå®‰å…¨é—®é¢˜ï¼Œå¹¶ä¸”éš¾ä»¥å¤„ç†ã€‚

ç„¶è€Œï¼Œå®ƒä»¬ä»æ ¹æœ¬ä¸Šæ˜¯æœ‰ç”¨çš„ï¼Œå¹¶ä¸”çŸ­æœŸå†…ä¸ä¼šæ¶ˆå¤±ã€‚

é€šè¿‡æ¢ç´¢ç¬¬ä¸‰æ–¹è„šæœ¬çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¯ä»¥åœ¨å“ªäº›æ–¹é¢è¿›è¡Œæ”¹è¿›ã€‚

### ğŸ˜’ å¼€å‘è€…ä½“éªŒï¼šå…¨æ ˆéš¾é¢˜

è®©æˆ‘ä»¬é€æ­¥äº†è§£å¦‚ä½•ä½¿ç”¨ä¸€ä¸ªè™šæ„çš„ `tracker.js` è„šæœ¬ï¼ˆè¯¥è„šæœ¬å‘ window æ·»åŠ ä¸€ä¸ª `track` å‡½æ•°ï¼‰å°†ç¬¬ä¸‰æ–¹è„šæœ¬æ·»åŠ åˆ°æ‚¨çš„ Nuxt åº”ç”¨ç¨‹åºã€‚

æˆ‘ä»¬é¦–å…ˆä½¿ç”¨ `useHead` åŠ è½½è„šæœ¬ã€‚

```ts
useHead({ script: [{ src: '/tracker.js', defer: true }] })
```

ä½†æ˜¯ï¼Œç°åœ¨è®©æˆ‘ä»¬å°è¯•ä½¿è„šæœ¬åŠŸèƒ½åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­å·¥ä½œã€‚

åœ¨ Nuxt ä¸­ä½¿ç”¨ç¬¬ä¸‰æ–¹è„šæœ¬æ—¶ï¼Œä»¥ä¸‹æ­¥éª¤å¾ˆå¸¸è§ï¼š

- ä¸ºäº† SSR å®‰å…¨ï¼Œä¸€åˆ‡éƒ½å¿…é¡»è¢«åŒ…è£¹èµ·æ¥ã€‚
- å¯¹è„šæœ¬æ˜¯å¦å·²åŠ è½½è¿›è¡Œä¸å¯é çš„æ£€æŸ¥ã€‚
- æ‰©å…… window å¯¹è±¡ä»¥è¿›è¡Œç±»å‹å®šä¹‰ã€‚

::code-group

```vue [1: SSR å®‰å…¨]
<script setup>
// âŒ ç³Ÿç³•ï¼Œwindow æœªå®šä¹‰ï¼
// ğŸ’¡ å¦‚æœæˆ‘ä»¬åœ¨ Nuxt ä¸­ä½¿ç”¨ SSRï¼Œåˆ™æ— æ³•ç›´æ¥è®¿é—® windowã€‚
// ğŸ‘‰ æˆ‘ä»¬éœ€è¦ä½¿å…¶å…·æœ‰ SSR å®‰å…¨æ€§
window.track('page_view', useRoute().path)
</script>
```

```vue [2: è„šæœ¬æ—¶åº]
<script setup>
if (import.meta.client) {
  // âŒ ç³Ÿç³•ï¼Œè„šæœ¬å°šæœªåŠ è½½å®Œæˆï¼
  // ğŸ’¡ åœ¨æˆ‘ä»¬çš„ Nuxt åº”ç”¨ç¨‹åºæ°´åˆæ—¶ï¼Œ`defer` è„šæœ¬å¯èƒ½ä¸å¯ç”¨ã€‚
  // ğŸ‘‰ æˆ‘ä»¬éœ€è¦ç­‰å¾…è„šæœ¬åŠ è½½å®Œæˆ
  window.track('page_view', useRoute().path)
}
</script>
```

```vue [3: ç±»å‹é”™è¯¯]
<script lang="ts" setup>
if (import.meta.client) {
  useTimeoutFn(() => {
    // âœ… å®ƒæ­£åœ¨å·¥ä½œï¼
    // âŒ ç³Ÿç³•ï¼Œç±»å‹é”™è¯¯ã€‚
    // ğŸ’¡ `window` å…·æœ‰ä¸¥æ ¼çš„ç±»å‹ï¼Œå¹¶ä¸”å°šæœªå®šä¹‰ä»»ä½•å†…å®¹ã€‚
    // ğŸ‘‰ æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨æ‰©å…… window
    window.track('page_view', useRoute().path)
  }, 1000 /* åº”è¯¥åœ¨ 1 ç§’å†…åŠ è½½ï¼ï¼Ÿ */)
}
</script>
```

```vue [4: å®ƒå·¥ä½œäº†å—ï¼Ÿ]
<script lang="ts" setup>
declare global {
  interface Window {
    track: (e: string, p: string) => void
  }
}
if (import.meta.client) {
  useTimeoutFn(() => {
    // âœ… å®ƒæ­£åœ¨å·¥ä½œï¼Œç±»å‹ä¹Ÿæœ‰æ•ˆï¼
    // âŒ ç³Ÿç³•ï¼Œå¹¿å‘Šæ‹¦æˆªå™¨ã€GDPR å’Œé‡å¤è„šæœ¬
    // ğŸ’¡ ç¬¬ä¸‰æ–¹è„šæœ¬ä¸­éšè—ç€è®¸å¤šå¤æ‚æ€§
    // ğŸ‘‰ æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ›´å¥½çš„ API
    window.track('page_view', useRoute().path)
  }, 1000)
}
</script>
```

::

### ğŸŒ æ€§èƒ½ï¼šâ€œä¸ºä»€ä¹ˆæˆ‘çš„ Lighthouse åˆ†æ•°è¾¾ä¸åˆ° 100ï¼Ÿâ€

å¯¹äºè®¿é—®è€…å¼€å§‹ä¸æ‚¨çš„ Nuxt ç«™ç‚¹äº¤äº’ï¼Œéœ€è¦ä¸‹è½½åº”ç”¨ç¨‹åºåŒ…å¹¶ä¸” Vue éœ€è¦æ°´åˆåº”ç”¨ç¨‹åºå®ä¾‹ã€‚

å³ä½¿ä½¿ç”¨ `async` æˆ– `defer`ï¼ŒåŠ è½½ç¬¬ä¸‰æ–¹è„šæœ¬ä¹Ÿä¼šå¹²æ‰°æ­¤æ°´åˆè¿‡ç¨‹ã€‚è¿™ä¼šå‡æ…¢ç½‘ç»œé€Ÿåº¦å¹¶é˜»å¡ä¸»çº¿ç¨‹ï¼Œä»è€Œå¯¼è‡´ç”¨æˆ·ä½“éªŒä¸‹é™å’Œ [Core Web Vitals](https://web.dev/vitals/) åˆ†æ•°ä¸ä½³ã€‚

[Chrome ç”¨æˆ·ä½“éªŒæŠ¥å‘Š](https://developer.chrome.com/docs/crux) æ˜¾ç¤ºï¼Œå…·æœ‰å¤§é‡ç¬¬ä¸‰æ–¹èµ„æºçš„ Nuxt ç«™ç‚¹é€šå¸¸å…·æœ‰è¾ƒå·®çš„ [é¦–æ¬¡è¾“å…¥å»¶è¿Ÿ (INP)](https://web.dev/articles/inp) å’Œ [æœ€å¤§å†…å®¹ç»˜åˆ¶ (LCP)](https://web.dev/articles/lcp) åˆ†æ•°ã€‚

è¦äº†è§£ç¬¬ä¸‰æ–¹è„šæœ¬å¦‚ä½•é™ä½æ€§èƒ½ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹ [Web Almanac 2022](https://almanac.httparchive.org/en/2022/third-parties#impact-on-performance)ã€‚è¯¥æŠ¥å‘Šæ˜¾ç¤ºï¼Œæ’åå‰ 10 çš„ç¬¬ä¸‰æ–¹è„šæœ¬çš„ **å¹³å‡ä¸­ä½æ•°é˜»å¡æ—¶é—´ä¸º 1.4 ç§’**ã€‚

### ğŸ›¡ï¸ éšç§ä¸å®‰å…¨ï¼šâ€œä¸ä½œæ¶â€ï¼Ÿ

åœ¨æ’åå‰ 10,000 çš„ç½‘ç«™ä¸­ï¼Œ58% çš„ç½‘ç«™çš„ç¬¬ä¸‰æ–¹è„šæœ¬ä¼š[äº¤æ¢å­˜å‚¨åœ¨å¤–éƒ¨ Cookie ä¸­çš„è·Ÿè¸ª ID](https://www3.cs.stonybrook.edu/~mikepo/papers/firstparty.www21.pdf)ï¼Œè¿™æ„å‘³ç€å³ä½¿ç¦ç”¨äº†ç¬¬ä¸‰æ–¹ Cookieï¼Œå®ƒä»¬ä¹Ÿå¯ä»¥è·¨ç«™ç‚¹è·Ÿè¸ªç”¨æˆ·ã€‚

è™½ç„¶åœ¨è®¸å¤šæƒ…å†µä¸‹æˆ‘ä»¬å¯¹ä½¿ç”¨çš„æä¾›å•†æ— èƒ½ä¸ºåŠ›ï¼Œä½†æˆ‘ä»¬åº”è¯¥å°½å¯èƒ½å‡å°‘æ³„éœ²æœ€ç»ˆç”¨æˆ·æ•°æ®çš„æ•°é‡ã€‚

å½“æˆ‘ä»¬ç¡®å®è€ƒè™‘éšç§å½±å“æ—¶ï¼Œå°±å¾ˆéš¾åœ¨æˆ‘ä»¬çš„éšç§æ”¿ç­–ä¸­å‡†ç¡®åœ°ä¼ è¾¾è¿™äº›å½±å“ï¼Œå¹¶æ„å»ºç¬¦åˆ GDPR ç­‰æ³•è§„æ‰€éœ€çš„åŒæ„ç®¡ç†ã€‚

ä½¿ç”¨ç¬¬ä¸‰æ–¹è„šæœ¬æ—¶çš„å®‰å…¨æ€§ä¹Ÿæ˜¯ä¸€ä¸ªä»¤äººæ‹…å¿§çš„é—®é¢˜ã€‚ç¬¬ä¸‰æ–¹è„šæœ¬æ˜¯æ¶æ„è¡Œä¸ºè€…çš„å¸¸è§æ”»å‡»åª’ä»‹ï¼Œå¤§å¤šæ•°è„šæœ¬ä¸ä¸ºå…¶è„šæœ¬æä¾› `integrity` å“ˆå¸Œï¼Œè¿™æ„å‘³ç€å®ƒä»¬å¯èƒ½éšæ—¶è¢«å…¥ä¾µå¹¶å°†æ¶æ„ä»£ç æ³¨å…¥æ‚¨çš„åº”ç”¨ç¨‹åºã€‚

## Nuxt Scripts å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜ï¼Ÿ

### Composableï¼šuseScript

æ­¤ composable ä½äº `<script>` æ ‡ç­¾å’Œæ·»åŠ åˆ° `window.{thirdPartyKey}` çš„åŠŸèƒ½ä¹‹é—´ã€‚

å¯¹äº `<script>` æ ‡ç­¾ï¼Œè¯¥ composableï¼š

- å®Œå…¨å¯è§è„šæœ¬çš„åŠ è½½å’Œé”™è¯¯çŠ¶æ€
- é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨ Nuxt æ°´åˆåº”ç”¨ç¨‹åºæ—¶åŠ è½½è„šæœ¬ï¼Œä»¥è·å¾—ç¨å¥½çš„æ€§èƒ½ã€‚
- é™åˆ¶ `crossorigin` å’Œ `referrerpolicy` ä»¥æé«˜éšç§å’Œå®‰å…¨æ€§ã€‚
- æä¾›ä¸€ç§[å»¶è¿ŸåŠ è½½è„šæœ¬](https://scripts.nuxt.com/docs/guides/script-triggers)çš„æ–¹å¼ï¼Œç›´åˆ°æ‚¨éœ€è¦å®ƒæ—¶æ‰åŠ è½½ã€‚

å¯¹äºè„šæœ¬ APIï¼Œå®ƒï¼š

- æä¾›å›´ç»•è„šæœ¬å‡½æ•°çš„å®Œæ•´ç±»å‹å®‰å…¨æ€§
- æ·»åŠ ä»£ç†å±‚ï¼Œå…è®¸æ‚¨çš„åº”ç”¨ç¨‹åºåœ¨è„šæœ¬å‡½æ•°å¤„äºä¸å®‰å…¨çš„ç¯å¢ƒä¸­ï¼ˆSSRã€è„šæœ¬åŠ è½½å‰ã€è„šæœ¬è¢«é˜»æ­¢ï¼‰è¿è¡Œæ—¶è¿è¡Œ

::code-group

```ts [hello.ts]
const { proxy, onLoaded } = useScript('/hello.js', {
  trigger: 'onNuxtReady',
  use() {
    return window.helloWorld
  }
})

onLoaded(({ greeting }) => {
  // âœ… è„šæœ¬å·²åŠ è½½ï¼æŒ‚é’©åˆ° Vue ç”Ÿå‘½å‘¨æœŸ
})

// âœ… æˆ–è€…ä½¿ç”¨ä»£ç† API - SSR å‹å¥½ï¼Œè„šæœ¬åŠ è½½åè°ƒç”¨
proxy.greeting() // Hello, World!

declare global {
  interface Window {
    helloWorld: {
      greeting: () => 'Hello World!'
    }
  }
}
```

```ts [hello.js]
window.helloWorld = {
  greeting() {
    console.log('Hello, World!')
  }
}
```

::

### è„šæœ¬æ³¨å†Œè¡¨

[è„šæœ¬æ³¨å†Œè¡¨](https://scripts.nuxt.com/scripts) æ˜¯å¸¸è§ç¬¬ä¸‰æ–¹è„šæœ¬çš„ç¬¬ä¸€æ–¹é›†æˆé›†åˆã€‚æˆªè‡³å‘å¸ƒæ—¶ï¼Œæˆ‘ä»¬æ”¯æŒ 21 ä¸ªè„šæœ¬ï¼Œæœªæ¥è¿˜ä¼šå¢åŠ æ›´å¤šã€‚

è¿™äº›æ³¨å†Œè¡¨è„šæœ¬æ˜¯å›´ç»• `useScript` è¿›è¡Œå¾®è°ƒçš„åŒ…è£…å™¨ï¼Œå…·æœ‰å®Œæ•´çš„ç±»å‹å®‰å…¨æ€§ã€è„šæœ¬é€‰é¡¹çš„è¿è¡Œæ—¶éªŒè¯ï¼ˆä»…é™å¼€å‘ç¯å¢ƒï¼‰å’Œç¯å¢ƒå˜é‡æ”¯æŒã€‚

ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹ [Fathom Analytics](https://scripts.nuxt.com/scripts/analytics/fathom-analytics) è„šæœ¬ã€‚

```ts
const { proxy } = useScriptFathomAnalytics({
  // âœ… é€‰é¡¹åœ¨è¿è¡Œæ—¶è¿›è¡ŒéªŒè¯
  site: undefined
})
// âœ… å·²é”®å…¥
proxy.trackPageview()
```

### å¤–è§‚ç»„ä»¶

æ³¨å†Œè¡¨åŒ…å«å‡ ä¸ª[å¤–è§‚ç»„ä»¶](https://scripts.nuxt.com/docs/guides/facade-components)ï¼Œä¾‹å¦‚ [Google åœ°å›¾](https://scripts.nuxt.com/scripts/content/google-maps)ã€[YouTube](https://scripts.nuxt.com/scripts/content/youtube-player) å’Œ [Intercom](https://scripts.nuxt.com/scripts/support/intercom)ã€‚

å¤–è§‚ç»„ä»¶æ˜¯å½“ç¬¬ä¸‰æ–¹è„šæœ¬åŠ è½½æ—¶æ°´åˆçš„â€œä¼ªâ€ç»„ä»¶ã€‚å¤–è§‚ç»„ä»¶æœ‰åˆ©å¼Šï¼Œä½†å¯ä»¥æ˜¾è‘—æé«˜æ‚¨çš„æ€§èƒ½ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…[ä»€ä¹ˆæ˜¯å¤–è§‚ç»„ä»¶ï¼Ÿ](https://scripts.nuxt.com/docs/guides/facade-components#what-are-facade-components) æŒ‡å—ã€‚

Nuxt Scripts æä¾›å¤–è§‚ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶æ˜¯å¯è®¿é—®ä½†æ— å¤´çš„ï¼Œè¿™æ„å‘³ç€å®ƒä»¬é»˜è®¤æ²¡æœ‰æ ·å¼ï¼Œä½†æ·»åŠ äº†å¿…è¦çš„ a16y æ•°æ®ã€‚

::tabs

:::tabs-item{label="è¾“å‡º"}
:youtube-demo
:::

:::tabs-item{label="è¾“å…¥"}
```vue
<script setup lang="ts">
const isLoaded = ref(false)
const isPlaying = ref(false)
const video = ref()
function play() {
  video.value?.player.playVideo()
}
function stateChange(state) {
  isPlaying.value = state.data === 1
}
</script>

<template>
  <ScriptYouTubePlayer ref="video" video-id="d_IFKP1Ofq0" @ready="isLoaded = true" @state-change="stateChange">
    <template #awaitingLoad>
      <div class="absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 h-[48px] w-[68px]">
        <svg height="100%" version="1.1" viewBox="0 0 68 48" width="100%"><path d="M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z" fill="#f00" /><path d="M 45,24 27,14 27,34" fill="#fff" /></svg>
      </div>
    </template>
  </ScriptYouTubePlayer>
</template>
```
:::

::

### åŒæ„ç®¡ç†ä¸å…ƒç´ äº‹ä»¶è§¦å‘å™¨

`useScript` composable ä½¿æ‚¨å¯ä»¥é€šè¿‡æä¾›è‡ªå®šä¹‰ `trigger` æˆ–æ‰‹åŠ¨è°ƒç”¨ `load()` å‡½æ•°æ¥å®Œå…¨æ§åˆ¶è„šæœ¬çš„åŠ è½½æ–¹å¼å’Œæ—¶é—´ã€‚

åœ¨æ­¤åŸºç¡€ä¸Šï¼ŒNuxt Scripts æä¾›äº†æ›´é«˜çº§çš„è§¦å‘å™¨ï¼Œä½¿å…¶æ›´åŠ æ˜“äºä½¿ç”¨ã€‚

- [åŒæ„ç®¡ç†](https://scripts.nuxt.com/docs/guides/consent) - ä»…åœ¨ç”¨æˆ·åŒæ„ååŠ è½½è„šæœ¬ï¼Œä¾‹å¦‚ä½¿ç”¨ Cookie æ¨ªå¹…ã€‚
- [å…ƒç´ äº‹ä»¶è§¦å‘å™¨](https://scripts.nuxt.com/docs/guides/script-triggers#element-event-triggers) - æ ¹æ®ç”¨æˆ·äº¤äº’ï¼ˆä¾‹å¦‚æ»šåŠ¨ã€å•å‡»æˆ–è¡¨å•æäº¤ï¼‰åŠ è½½è„šæœ¬ã€‚

```ts
const cookieConsentTrigger = useScriptTriggerConsent()
const { proxy } = useScript<{ greeting: () => void }>('/hello.js', {
  // åªæœ‰åœ¨åŒæ„è¢«æ¥å—åæ‰ä¼šåŠ è½½è„šæœ¬
  trigger: cookieConsentTrigger
})
// ...
function acceptCookies() {
  cookieConsentTrigger.accept()
}
// åœ¨ç”¨æˆ·æ¥å— Cookie ä¹‹å‰ï¼Œgreeting() ä¼šè¢«æ’é˜Ÿ
proxy.greeting()
```

### æ‰“åŒ…è„šæœ¬

åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä»æˆ‘ä»¬æ— æ³•æ§åˆ¶çš„åŸŸåŠ è½½ç¬¬ä¸‰æ–¹è„šæœ¬ã€‚è¿™å¯èƒ½å¯¼è‡´è®¸å¤šé—®é¢˜ï¼š

- éšç§ï¼šç¬¬ä¸‰æ–¹è„šæœ¬å¯ä»¥è·¨ç«™ç‚¹è·Ÿè¸ªç”¨æˆ·ã€‚
- å®‰å…¨ï¼šç¬¬ä¸‰æ–¹è„šæœ¬å¯èƒ½è¢«å…¥ä¾µå¹¶æ³¨å…¥æ¶æ„ä»£ç ã€‚
- æ€§èƒ½ï¼šé¢å¤–çš„ DNS æŸ¥è¯¢ä¼šå‡æ…¢é¡µé¢åŠ è½½é€Ÿåº¦ã€‚
- å¼€å‘è€…ä½“éªŒï¼šå·²åŒæ„çš„è„šæœ¬å¯èƒ½è¢«å¹¿å‘Šæ‹¦æˆªå™¨é˜»æ­¢ã€‚

ä¸ºäº†ç¼“è§£è¿™ç§æƒ…å†µï¼ŒNuxt Scripts æä¾›äº†ä¸€ç§æ— éœ€ä»»ä½•é¢å¤–å·¥ä½œå³å¯å°†ç¬¬ä¸‰æ–¹è„šæœ¬æ†ç»‘åˆ°æ‚¨çš„ public ç›®å½•ä¸­çš„æ–¹æ³•ã€‚

```ts
useScript('https://cdn.jsdelivr.net/npm/js-confetti@latest/dist/js-confetti.browser.js', {
  bundle: true,
})
```

è¯¥è„šæœ¬ç°åœ¨å°†ä»æ‚¨è‡ªå·±åŸŸä¸Šçš„ `/_scripts/{hash}` æä¾›ã€‚

## æœªå®Œå¾…ç»­

æ­£å¦‚æˆ‘ä»¬æ‰€è§ï¼Œæœ‰å¾ˆå¤šæœºä¼šå¯ä»¥ä¸ºå¼€å‘è€…å’Œæœ€ç»ˆç”¨æˆ·æ”¹è¿›ç¬¬ä¸‰æ–¹è„šæœ¬ã€‚

Nuxt Scripts çš„åˆå§‹ç‰ˆæœ¬å·²ç»è§£å†³äº†ä¸€äº›è¿™äº›é—®é¢˜ï¼Œä½†æˆ‘ä»¬è¿˜æœ‰å¾ˆå¤šå·¥ä½œè¦åšã€‚

è·¯çº¿å›¾ä¸Šçš„ä¸‹ä¸€é¡¹æ˜¯ï¼š

- [æ·»åŠ  Web Worker æ”¯æŒ (Partytown)](https://github.com/nuxt/scripts/issues/182)
- [æ›´å¤š Live Chat å¤–è§‚ç»„ä»¶](https://github.com/nuxt/scripts/issues/44)
- [å°†è„šæœ¬å¸è½½åˆ° Nuxt æœåŠ¡å™¨ä»£ç†](https://github.com/nuxt/scripts/issues/87)
- [Iframe è„šæœ¬æ²™ç®±](https://github.com/nuxt/scripts/issues/131)

æˆ‘ä»¬å¾ˆä¹æ„å¾—åˆ°æ‚¨çš„è´¡çŒ®å’Œæ”¯æŒã€‚

## å¿«é€Ÿä¸Šæ‰‹

è¦å¼€å§‹ä½¿ç”¨ Nuxt Scriptsï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª[æ•™ç¨‹](https://scripts.nuxt.com/docs/getting-started/confetti-tutorial)æ¥å¸®åŠ©æ‚¨å¿«é€Ÿå…¥é—¨ã€‚

## é¸£è°¢

- [Harlan Wilton - Nuxt](https://github.com/harlan-zw) (ä½œè€…)
- [Julien Huang - Nuxt](https://github.com/huang-julien) (è´¡çŒ®è€…)
- [Daniel Roe - Nuxt](https://github.com/danielroe) (è´¡çŒ®è€…)
- [Chrome Aurora - Google](https://developer.chrome.com/aurora) (è´¡çŒ®è€…)

å¹¶è¡·å¿ƒæ„Ÿè°¢æ—©æœŸçš„è´¡çŒ®è€…ã€‚
