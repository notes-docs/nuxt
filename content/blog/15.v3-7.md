---
title: 'Nuxt 3.7'
description: "Nuxt 3.7 ç°å·²å‘å¸ƒï¼Œå¸¦æ¥äº†æ–°çš„ CLIã€åŸç”Ÿ Web Streams å’Œ Responseã€æ¸²æŸ“ä¼˜åŒ–ã€å¼‚æ­¥ä¸Šä¸‹æ–‡æ”¯æŒç­‰ç­‰ã€‚"
navigation: false
image: /assets/blog/v3.7.png
authors:
  - name: Daniel Roe
    avatar:
      src: https://github.com/danielroe.png
    to: https://bsky.app/profile/danielroe.dev
date: 2023-08-25
category: Release
---

### ğŸ£ å…¨æ–°çš„ CLI

æˆ‘ä»¬ä½¿ç”¨ [unjs/citty](http://github.com/unjs/citty) é‡æ„äº† `nuxi`ï¼Œè¿™æ ‡å¿—ç€ç¬¬ä¸€ä¸ªä¾èµ–äºæ–°ç‰ˆæœ¬çš„ Nuxt å‘å¸ƒï¼Œå®ƒå®‰å…¨åœ°ä½äºè‡ªå·±çš„å­˜å‚¨åº“ä¸­ã€‚æˆ‘ä»¬å¯¹æ­¤æœ‰å®ä¼Ÿçš„è®¡åˆ’ - è¯·æŸ¥çœ‹ [nuxt/cli](https://github.com/nuxt/cli) ä¸­çš„ä¸€äº›åŠŸèƒ½ + è·¯çº¿å›¾è®¨è®ºï¼Œå¹¶éšæ—¶è´¡çŒ®ï¼

- <a href="https://github.com/nuxt/cli/discussions/3" target="_blank"><strong>Project Goals</strong></a>
- <a href="https://github.com/nuxt/cli/discussions/4" target="_blank">Feedbacks and Ideas</a>
- <a href="https://github.com/nuxt/cli/discussions/7" target="_blank">The journey of Nuxt CLI Generations</a>

Nuxi ç°åœ¨ä¸ä¸»è¦çš„ `nuxt` ç‰ˆæœ¬è§£è€¦ - æˆ‘ä»¬è®¡åˆ’åœ¨æœªæ¥æ›´å¿«åœ°è¿­ä»£å’Œå‘å¸ƒ nuxiï¼Œå› æ­¤æ‚¨å¯ä»¥æœŸå¾…å¾ˆå¿«ä¼šæœ‰æ–°å†…å®¹ï¼

### ğŸ•¸ï¸ åŸç”Ÿ Web Streams å’Œ `Response`

éšç€ [unjs/h3](https://github.com/unjs/h3) å’Œ [unjs/nitro](https://github.com/unjs/nitro) çš„æ”¹è¿›ï¼Œç°åœ¨å¯ä»¥ç›´æ¥ä»æœåŠ¡å™¨è·¯ç”±è¿”å› `Response` å¯¹è±¡ï¼Œè¿™æ„å‘³ç€ä¹Ÿå¯ä»¥åœ¨ Nuxt ä¸­åŸç”Ÿè¿”å›å’Œå¤„ç†æµã€‚

è¯·æŸ¥çœ‹ [unjs/h3](https://github.com/unjs/h3/releases) å’Œ [unjs/nitro](https://github.com/unjs/nitro/releases) çš„å®Œæ•´å‘å¸ƒè¯´æ˜äº†è§£è¯¦ç»†ä¿¡æ¯ã€‚

### ğŸ”¥  HTML æ¸²æŸ“ä¼˜åŒ–

æ­¤ç‰ˆæœ¬å¯¹æœåŠ¡å™¨æ¸²æŸ“ HTML å“åº”è¿›è¡Œäº†ä¸€äº›æ”¹è¿›ã€‚æˆ‘ä»¬ç°åœ¨åœ¨æ„å»ºæ—¶ç¡®å®šæ˜¯å¦é¢„åŠ è½½/é¢„å–èµ„æºï¼ˆå› æ­¤æ‚¨å¯ä»¥åœ¨ `build:manifest` é’©å­ä¸­è‡ªå®šä¹‰æ­¤è®¾ç½®ï¼‰ã€‚æˆ‘ä»¬ç°åœ¨è¿˜åœ¨ `unhead` ä¸­ç›´æ¥ç®¡ç†å®ƒä»¬çš„ HTML æ¸²æŸ“ ([#22179](https://github.com/nuxt/nuxt/pull/22179))ï¼Œè¿™æ„å‘³ç€æ‚¨å¯ä»¥é…ç½® `<link>`ã€`<meta>`ã€`<script>`ã€`<style>` ç­‰çš„é¡ºåºã€‚å¹¶ä¸” - åœ¨æˆ‘ä»¬çš„åˆæ­¥æµ‹è¯•ä¸­ - å®ƒç”šè‡³æ›´å¿«ï¼

å¯ä»¥ä½¿ç”¨ `experimental.headNext` æ ‡å¿—é€‰æ‹©åŠ å…¥å³å°†åˆ°æ¥çš„ head æ”¹è¿›ã€‚è¿™ç›®å‰åŒ…æ‹¬åŸºäº [capo.js](https://github.com/rviscomi/capo.js) çš„æ–°æ’åºç®—æ³• ([#22431](https://github.com/nuxt/nuxt/pull/22431))ï¼Œå¹¶å…è®¸åœ¨ `unhead` ä¸­å‘å¸ƒæœªæ¥çš„ä¼˜åŒ–æ—¶å¯ç”¨å®ƒä»¬ï¼š

```ts
export default defineNuxtConfig({
  experimental: {
    headNext: true
  }
})
```

æˆ‘ä»¬å¾ˆæƒ³å¬å¬æ‚¨çš„æƒ³æ³• - æ‚¨å¯ä»¥åœ¨ [æ­¤è®¨è®º](https://github.com/nuxt/nuxt/discussions/22632) ä¸­å›å¤ä»»ä½•é—®é¢˜/åé¦ˆã€‚

### ğŸ› ï¸ æ„å»ºç¯å¢ƒå¿«æ·æ–¹å¼

åœ¨æ‚¨çš„ Nuxt é…ç½®ä¸­ï¼Œæ‚¨ç°åœ¨å¯ä»¥ä½¿ç”¨ `$client` å’Œ `$server` å¿«æ·æ–¹å¼è½»æ¾å®šä¹‰ä»…ç‰¹å®šäº Vite å®¢æˆ·ç«¯/æœåŠ¡å™¨ ([#22302](https://github.com/nuxt/nuxt/pull/22302)) æˆ– webpack å®¢æˆ·ç«¯/æœåŠ¡å™¨ ([#22304](https://github.com/nuxt/nuxt/pull/22304)) æ„å»ºçš„é…ç½®ã€‚ä»¥å‰è¿™åªèƒ½é€šè¿‡ `vite:extendConfig` å’Œ `webpack:config` é’©å­å®ç°ã€‚

ä¾‹å¦‚ï¼š

```ts
export default defineNuxtConfig({
  vite: {
    $client: {
      build: {
        rollupOptions: {
          output: {
            chunkFileNames: '_nuxt/[hash].js',
            assetFileNames: '_nuxt/[hash][extname]',
            entryFileNames: '_nuxt/[hash].js'
          }
        }
      }
    }
  }
})
```

### âš¡ï¸ Vite 4.4

æˆ‘ä»¬é€‰æ‹©å–æ¶ˆå›ºå®š Vite çš„æ¬¡è¦ç‰ˆæœ¬ï¼Œè¿™æ„å‘³ç€æ¯å½“ Vite å‘å¸ƒæ–°çš„åŠŸèƒ½ç‰ˆæœ¬æ—¶ï¼Œæ‚¨éƒ½å¯ä»¥ç«‹å³é€‰æ‹©åŠ å…¥ã€‚Vite 4.4 å¸¦æ¥äº†è®¸å¤šä»¤äººå…´å¥‹çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬å®éªŒæ€§çš„ Lightning CSS æ”¯æŒç­‰ç­‰ï¼

ğŸ‘‰ è¯·æŸ¥çœ‹ [Vite å‘å¸ƒè¯´æ˜](https://github.com/vitejs/vite/blob/main/packages/vite/CHANGELOG.md#440-2023-07-06) äº†è§£æ›´å¤šä¿¡æ¯ã€‚

### ğŸ’ª TypeScript æ›´æ–°

æˆ‘ä»¬ç°åœ¨åœ¨ç”Ÿæˆçš„ `tsconfig.json` ä¸­ä½¿ç”¨çº¯ç²¹çš„ç›¸å¯¹è·¯å¾„ï¼Œè€Œä¸æ˜¯è®¾ç½® `baseUrl`ã€‚è¿™æ„å‘³ç€å¯¹åƒ docker é•œåƒè¿™æ ·çš„å¼€å‘ç¯å¢ƒæœ‰æ›´å¥½çš„æ”¯æŒï¼Œåœ¨è¿™äº›ç¯å¢ƒä¸­ï¼Œç»å¯¹è·¯å¾„å¯èƒ½ä¸æ‚¨çš„ IDE ä¸åŒ¹é… ([#22410](https://github.com/nuxt/nuxt/pull/22410))ã€‚

æˆ‘ä»¬è¿˜è®¾ç½®äº†ä¸€äº›é¢å¤–çš„ç¼–è¯‘å™¨æ ‡å¿—é»˜è®¤å€¼ï¼Œä»¥åŒ¹é… Vite/TS å»ºè®® ([#22468](https://github.com/nuxt/nuxt/pull/22468))ã€‚

æ­¤å¤–ï¼Œæ‚¨ç°åœ¨åº”è¯¥å¯ä»¥åœ¨ `setPageLayout` å’Œ `<NuxtLayout name>` ä¸­è·å¾—å¸ƒå±€çš„ç±»å‹æç¤ºè®¿é—® ([#22363](https://github.com/nuxt/nuxt/pull/22362))ã€‚

### ğŸ¦„ å¼‚æ­¥ä¸Šä¸‹æ–‡æ”¯æŒ

å¦‚æœæ‚¨æ›¾ç»é‡åˆ°è¿‡ â€œNuxt ä¸Šä¸‹æ–‡ä¸å¯ç”¨â€ çš„é—®é¢˜ï¼Œè¿™å¯èƒ½é€‚åˆæ‚¨ã€‚æˆ‘ä»¬ç°åœ¨åœ¨å®éªŒæ€§æ ‡å¿—ä¸‹ä¸º Bun å’Œ Node æ”¯æŒåŸç”Ÿå¼‚æ­¥ä¸Šä¸‹æ–‡ï¼ŒåŒ…æ‹¬ Nuxt å’Œ Nitro ([#20918](https://github.com/nuxt/nuxt/pull/20918))ã€‚

è¿™ä½¿å¾—åœ¨æœåŠ¡å™¨ä¸Šä½¿ç”¨ Nuxt composables æˆä¸ºå¯èƒ½ï¼Œè€Œæ— éœ€ç¡®ä¿å®ƒä»¬ç›´æ¥åœ¨ setup å‡½æ•°ä¸­è¢«è°ƒç”¨ã€‚Nitro ä¸­ä¹Ÿå…è®¸è¿™æ ·åšï¼Œå¹¶æä¾›äº†ä¸€ä¸ªæ–°çš„ `useEvent()` å®ç”¨ç¨‹åºï¼Œå¯åœ¨æœåŠ¡å™¨è·¯ç”±ä¸­ä½¿ç”¨ã€‚

è¦è¯•ç”¨ï¼Œæ‚¨å¯ä»¥å¯ç”¨ `experimental.asyncContext`ï¼š

```ts
export default defineNuxtConfig({
  experimental: {
    asyncContext: true
  }
})
```

### ğŸ‘“ Watcher æ›´æ–°

æˆ‘ä»¬ä¿®å¤äº† watcher çš„å‡ ä¸ªé—®é¢˜ï¼Œè¿™æ„å‘³ç€æ‚¨åº”è¯¥æ›´å°‘åœ°éœ€è¦é‡å¯æœåŠ¡å™¨ - å¦‚æœæ‚¨ä½¿ç”¨ layersï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°æ˜¾ç€çš„æ€§èƒ½æå‡ã€‚

### âš—ï¸ Nitro 2.6

Nitro 2.6 ç›´æ¥å¸¦æ¥äº†è®¸å¤šæ›´ä»¤äººå…´å¥‹çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ›´å°ã€æ›´è½»çš„æœåŠ¡å™¨ä»¥åŠ `.data` ç›®å½•ä¸­çš„æ–°æŒä¹…æ•°æ®å­˜å‚¨ã€‚

ğŸ‘‰ è¯·åœ¨ [å®Œæ•´å‘å¸ƒæ–‡ç« ](https://unjs.io/blog/2023-08-25-nitro-2.6) ä¸­é˜…è¯»æ›´å¤šä¿¡æ¯ã€‚

## âœ… å‡çº§

ä¸å¾€å¸¸ä¸€æ ·ï¼Œæˆ‘ä»¬å»ºè®®çš„å‡çº§æ–¹æ³•æ˜¯è¿è¡Œï¼š

```sh
npx nuxi upgrade --force
```

è¿™ä¹Ÿä¼šåˆ·æ–°æ‚¨çš„ lockfileï¼Œå¹¶ç¡®ä¿æ‚¨å¼•å…¥ Nuxt ä¾èµ–çš„å…¶ä»–ä¾èµ–é¡¹ï¼ˆå°¤å…¶æ˜¯åœ¨ [unjs](https://github.com/unjs) ç”Ÿæ€ç³»ç»Ÿä¸­ï¼‰çš„æ›´æ–°ã€‚


## ğŸ“ƒ å®Œæ•´æ›´æ–°æ—¥å¿—

é˜…è¯»å®Œæ•´çš„å‘å¸ƒè¯´æ˜ï¼š https://github.com/nuxt/nuxt/releases/tag/v3.7.0
